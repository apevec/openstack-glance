From 0037b0cef230abb171808fdbc1067bb1935bd650 Mon Sep 17 00:00:00 2001
From: Dan Prince <dan.prince@rackspace.com>
Date: Wed, 9 Nov 2011 20:47:27 -0500
Subject: [PATCH] Update 'glance show' to print a valid URI. Fixes bug
 #888370.

(cherry picked from commit 98cefb7fc8430ad92b002d2300fd2085c71c9750)

Change-Id: Ibe8d7974eb2dfca79953b473b904df55daafa748
---
 bin/glance |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/bin/glance b/bin/glance
index 166b695..1008ef6 100755
--- a/bin/glance
+++ b/bin/glance
@@ -131,8 +131,10 @@ def print_image_formatted(client, image):
     :param client: The Glance client object
     :param image: The image metadata
     """
-    print "URI: %s://%s/images/%s" % (client.use_ssl and "https" or "http",
+    print "URI: %s://%s:%s/v1/images/%s" % (
+                                      client.use_ssl and "https" or "http",
                                       client.host,
+                                      client.port,
                                       image['id'])
     print "Id: %s" % image['id']
     print "Public: " + (image['is_public'] and "Yes" or "No")
-- 
1.7.6.5

